<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.296">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Michal Ovádek">
<meta name="dcterms.date" content="2023-10-19">

<title>IUROPA Text Corpus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="release-notes_files/libs/clipboard/clipboard.min.js"></script>
<script src="release-notes_files/libs/quarto-html/quarto.js"></script>
<script src="release-notes_files/libs/quarto-html/popper.min.js"></script>
<script src="release-notes_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="release-notes_files/libs/quarto-html/anchor.min.js"></script>
<link href="release-notes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="release-notes_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="release-notes_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="release-notes_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="release-notes_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">IUROPA Text Corpus</h1>
<p class="subtitle lead">Codebook and release notes</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr Michal Ovádek </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">19 Oct 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This document accompanies the <strong><em>IUROPA Text Corpus</em></strong>, a database of judicial texts from the Court of Justice of the European Union (CJEU). The database comprises all types of judicial decisions and Advocate-General (AG) opinions at the paragraph level. Where available, both the French and English texts are included.</p>
<p>The corpus, codebook and release notes are current as of <strong>version 0.1 (release 2023-10-19)</strong>.</p>
<p>The corpus remains work-in-progress. Please <a href="mailto:m.ovadek@ucl.ac.uk">let us know</a> if you notice an error in the data or if you have suggestions for improvements. Consult the <a href="https://iuropa.pol.gu.se/">IUROPA website</a> for more resources.</p>
</section>
<section id="citation" class="level2">
<h2 class="anchored" data-anchor-id="citation">Citation</h2>
<p>When using any part of the <strong><em>IUROPA Text Corpus</em></strong> (including this page), please refer to the following citation:</p>
<p>Ovádek, Michal, Joshua Fjelstul, Daniel Naurin and Johan Lindholm. 2023. “The IUROPA Text Corpus”, in Lindholm, Johan, Daniel Naurin, Urska Sadl, Anna Wallerman Ghavanini, Stein Arne Brekke, Joshua Fjelstul, Silje Synnøve Lyder Hermansen, Olof Larsson, Andreas Moberg, Moa Näsström, Michal Ovádek, Tommaso Pavone, and Philipp Schroeder, The Court of Justice of the European Union (CJEU) Database, IUROPA, https://iuropa.pol.gu.se/.</p>
<p>In BibTex form:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span>incollection{ovadek2023iuropatext,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  author       <span class="ot">=</span> <span class="st">"Ovádek, Michal and Fjelstul, Joshua and Naurin, Daniel and Lindholm, Johan"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  title        <span class="ot">=</span> <span class="st">"The IUROPA Text Corpus"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  editor       <span class="ot">=</span> <span class="st">"Johan Lindholm, Daniel Naurin, Urska Sadl, Anna Wallerman Ghavanini, Stein Arne Brekke, Joshua Fjelstul, Silje Synnøve Lyder Hermansen, Olof Larsson, Andreas Moberg, Moa Näsström, Michal Ovádek, Tommaso Pavone, and Philipp Schroeder"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  booktitle    <span class="ot">=</span> <span class="st">"The Court of Justice of the European Union Database"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  year         <span class="ot">=</span> <span class="dv">2023</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  publisher    <span class="ot">=</span> <span class="st">"IUROPA Project"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  url          <span class="ot">=</span> <span class="st">"https://iuropa.pol.gu.se/"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="rationale" class="level2">
<h2 class="anchored" data-anchor-id="rationale">Rationale</h2>
<p>Prior to the release of the <strong><em>IUROPA Text Corpus</em></strong>, there was no unified and comprehensive database of CJEU decisions. Individually, neither the Curia nor the Eur-Lex website contains all decisions in a plain text format. In addition, older decisions – including landmark rulings such as <em>Costa v ENEL</em> and <em>Cassis de Dijon</em> – are only partially and imperfectly digitized.</p>
<p>The following table compares the number of unique documents present in the <strong><em>IUROPA Text Corpus</em></strong> with the number of documents containing plain (html) text on Curia and Eur-Lex by language version:</p>
<div class="cell-output-display">
<table class="table">
<caption>Number of documents with plain text</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">English</th>
<th style="text-align: left;">French</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Curia</td>
<td style="text-align: left;">23394</td>
<td style="text-align: left;">35900</td>
</tr>
<tr class="even">
<td style="text-align: left;">Eur-Lex</td>
<td style="text-align: left;">31992</td>
<td style="text-align: left;">35013</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>IUROPA</strong></td>
<td style="text-align: left;"><strong>36206</strong></td>
<td style="text-align: left;"><strong>46471</strong></td>
</tr>
</tbody>
</table>
</div>
<p>Whereas most academic and legal work relating to the CJEU has relied on English texts, this comparison reveals how much more comprehensive the French language corpus is. French remains the working language of the CJEU and not all decisions are translated into English.</p>
<p>Moreover, unlike most previous attempts to create a CJEU database, the unit of analysis in the <strong><em>IUROPA Text Corpus</em></strong> is the paragraph. Paragraphs are understood as blocks of text separated by line breaks in a document. This definition comprises both conventionally designated (and numbered) paragraphs and individual lines with text, such as presentation of lawyers and judges. Overall, paragraph-level data offers more granularity and versatility than decision-level data.</p>
</section>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>As of <strong>version 0.1 (release 2023-10-19)</strong>, the <strong><em>IUROPA Text Corpus</em></strong> contains a total of <code>10059348</code> paragraphs across <code>82677</code> documents. The number of documents in the corpus varies significantly over time, but also between language versions.</p>
<div class="quarto-figure quarto-figure-center" style="text-align: center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Number of documents per year</figcaption><p></p>
<p><img src="plots/docs_n_docs_year.png" class="quarto-discovered-preview-image img-fluid figure-img"></p>
</figure>
</div>
<p>The maximum number of French documents per year (<code>1964</code>) occurs in <code>2018</code>. An average year contains <code>664</code> documents in French and <code>517</code> documents in English.</p>
<p>The documents contain a varying number of paragraphs, ranging from <code>2</code> to <code>7157</code>. On average, French documents have <code>114</code> paragraphs, while English documents have an average of <code>105</code> paragraphs.</p>
<div class="quarto-figure quarto-figure-center" style="text-align: center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Average number of paragraphs per document</figcaption><p></p>
<p><img src="plots/docs_mean_n_paras.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>The large drops in the average number of paragraphs in the 1970s and 1980s can be attributed to the incomplete digitization of CJEU documents in that period. Having made more progress on French documents so far (see below), we can see how much of a difference full digitization makes compared to the highly imperfect plain texts found on Eur-Lex.</p>
<p>The digitization effect is similarly visible at the level of words-per-paragraph. More generally, average differences between language versions stem not only from linguistic variance between English and French, but also from differences between the two samples – recall that French is the default language for the vast majority of documents, not all of which end up being translated into English.</p>
<div class="quarto-figure quarto-figure-center" style="text-align: center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Average number of words per paragraph</figcaption><p></p>
<p><img src="plots/words_mean_n_paras.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>On average, French paragraphs contain <code>49</code> words, while English paragraphs have an average of <code>50</code> words.</p>
<p>A major advantage of the <strong><em>IUROPA Text Corpus</em></strong> is the inclusion of digitized texts of older decisions. After applying state-of-the-art optical character recognition (OCR) to correctly segmented PDFs of documents from 1954 to 1989, the digitization pipeline involves highly labour-intensive cleaning of plain texts to ensure their high quality at the paragraph level.</p>
<div class="quarto-figure quarto-figure-center" style="text-align: center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Number of processed OCR pages (current progress, remaining pages in shaded bars)</figcaption><p></p>
<p><img src="plots/ocr_coding_progress.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>The digitization task remains work-in-progress. Cleaned data is added to the corpus on a rolling basis. Of the total <code>86649</code> pages of text that require manual checking or cleaning, <code>30691</code> have been completed and added to the corpus.</p>
<p>Priority has been given to French documents: so far, <code>54%</code> of pages in French and <code>14%</code> of English pages have been processed. <a href="mailto:m.ovadek@ucl.ac.uk">Contact us</a> if you wish to contribute to this ongoing process.</p>
</section>
<section id="process" class="level2">
<h2 class="anchored" data-anchor-id="process">Process</h2>
<p>The <strong><em>IUROPA Text Corpus</em></strong> is generated using a data pipeline that combines automatic and manual processing. The workflow begins by downloading all html pages from Curia and Eur-Lex relating to CJEU decisions, including AG opinions. Subsequent steps retrieve and clean the texts and metadata at the paragraph level from the downloaded pages. This automatic process is then supplemented with manually curated data on decisions for which the html pages offer incomplete or erroneous texts. The main contribution of the manually curated data is the retrieval of older paragraphs that previously only existed in PDF documents. Finally, where more than one source contains a document, the source with the highest quality text (most complete, best labelled) is selected.</p>
<!--# add figure of workflow here -->
</section>
<section id="codebook" class="level2">
<h2 class="anchored" data-anchor-id="codebook">Codebook</h2>
<p>The <code>iuropa_text.gz.parquet</code> file contains a rectangular spreadsheet where each row encodes information about a single paragraph of a given document. The paragraph information is spread over columns with the following names and descriptions:</p>
<table class="table">
<colgroup>
<col style="width: 19%">
<col style="width: 43%">
<col style="width: 37%">
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td><strong>Description</strong></td>
<td><strong>Values</strong></td>
</tr>
<tr class="even">
<td><code>document_id</code></td>
<td>Uniquely identifies each document in the corpus.</td>
<td><code>character</code> Document identifiers.</td>
</tr>
<tr class="odd">
<td><code>paragraph_id</code></td>
<td>Uniquely identifies each paragraph in the corpus.</td>
<td><code>character</code> Paragraph identifiers.</td>
</tr>
<tr class="even">
<td><code>source</code></td>
<td>Source of the document text.</td>
<td><code>character</code> Curia (<code>cur</code>), Eur-Lex (<code>elx</code>) or optical character recognition (<code>ocr</code>).</td>
</tr>
<tr class="odd">
<td><code>language</code></td>
<td>Language version of the document.</td>
<td><code>character</code> English (<code>EN</code>) or French (<code>FR</code>).</td>
</tr>
<tr class="even">
<td><code>ecli</code></td>
<td>European Case Law Identifier (ECLI).</td>
<td><code>character</code> ECLI identifiers.</td>
</tr>
<tr class="odd">
<td><code>court</code></td>
<td>Authoring EU court.</td>
<td><code>character</code> One of <code>Court of Justice</code>, <code>General Court</code> or <code>Civil Service Tribunal</code>.</td>
</tr>
<tr class="even">
<td><code>date</code></td>
<td>Date of publication.</td>
<td><code>character</code> Date in format <code>YYYY-MM-DD</code>.</td>
</tr>
<tr class="odd">
<td><code>year</code></td>
<td>Year of publication.</td>
<td><code>integer</code> Ranges from <code>1954</code> to <code>2023</code>.</td>
</tr>
<tr class="even">
<td><code>text</code></td>
<td>Paragraph text.</td>
<td><code>character</code> Free text.</td>
</tr>
<tr class="odd">
<td><code>line_id</code></td>
<td>Running number for paragraphs in each document.</td>
<td><code>integer</code> Ranges from <code>1</code> to <code>n</code> paragraphs.</td>
</tr>
<tr class="even">
<td><code>section</code></td>
<td>The section of the document where the paragraph is found.</td>
<td><code>character</code> Experimental. One of <code>presentation</code>, <code>grounds</code>, <code>costs</code>, <code>operative</code>, <code>footnotes</code>, <code>annex</code>.</td>
</tr>
<tr class="odd">
<td><code>paragraph_type</code></td>
<td>A basic categorization of paragraph types.</td>
<td><code>character</code> Experimental.</td>
</tr>
<tr class="even">
<td><code>paragraph_number</code></td>
<td>The official paragraph number used in case citations. Note that some older decisions did not follow the numbering scheme which later became standard.</td>
<td><code>integer</code> Paragraph numbers. <code>0</code> indicates no official paragraph number. Several paragraphs can belong to the same <code>paragraph_number</code>.</td>
</tr>
<tr class="odd">
<td><code>nchar</code></td>
<td>Number of characters in <code>text</code>.</td>
<td><code>integer</code> Minimum <code>1</code>.</td>
</tr>
</tbody>
</table>
<p>As the <strong><em>IUROPA Text Corpus</em></strong> remains work-in-progress, the information in this codebook as well as the underlying data are subject to change.</p>
</section>
<section id="release-notes" class="level2">
<h2 class="anchored" data-anchor-id="release-notes">Release notes</h2>
<p>Database versioning is encoded in the version number and the date of the release. <strong>Version</strong> <strong>0.1</strong> constitutes the initial release of the database. Minor adjustments and updates are only reflected in the <strong>release date</strong> (currently <strong>2023-10-19</strong>), not the version number. Major changes are captured by the version number and documented below.</p>
<section id="version-0.1" class="level3">
<h3 class="anchored" data-anchor-id="version-0.1">Version 0.1</h3>
<ul>
<li>Initial release</li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>